webpackJsonp([14],{IDhJ:function(t,e){},TZzH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=a("bOdI"),s=a.n(i),o=a("Cz8s"),r=a("p/61"),c=a("s8Ph"),l=a("1pQF"),u=(a("mtWM"),{name:"Collection",data:function(){return{userInfo:"",searchText:"",showSearchResults:!1,searchedPosts:[],CategoryAll:{},browseList:"",searchResults:[],selectedDatabase:1,DatabaseObj:{},SubCategoryObj:{},totalPage:0,pageSize:50,currentPage:0,inputPage:1}},created:function(){var t=this,e=localStorage.getItem("userInfo");this.userInfo=JSON.parse(e),this.getCategory();var a={userId:this.userInfo.id};this.$http.post("/collect/searchCollectionByUser",a).then(function(e){200==e.data.code&&(t.searchResults=e.data.data,t.getTotalPage())}).catch(function(t){console.error(t)})},mounted:function(){this.selectedDatabase=this.DatabaseObj[0]},computed:{databasePosts:function(){var t=this;return this.posts.filter(function(e){return e.databaseId===t.selectedDatabase.id})},currentPageData:function(){var t=this.currentPage*this.pageSize,e=t+this.pageSize;return this.searchResults.slice(t,e)}},methods:(n={gotoPayment:function(t){var e=this.$router.resolve({path:"/Payment",query:{contentId:t.id,price:t.price,caseType:"01"}});window.open(e.href)},getTotalPage:function(){this.totalPage=Math.ceil(this.searchResults.length/this.pageSize)},prevPage:function(){this.currentPage>0&&this.currentPage--},nextPage:function(){this.currentPage<Math.ceil(this.searchResults.length/this.pageSize)-1&&this.currentPage++},gotoPage:function(){this.inputPage<1?this.inputPage=1:this.inputPage>this.totalPage&&(this.inputPage=this.totalPage),this.currentPage=this.inputPage-1},gotoDetail:function(t){var e=this,a=localStorage.getItem("userInfo");if(a){var n={userId:JSON.parse(a).id,contentId:t};this.$http.post("/shoppingcase/verifyShoppingCase",n).then(function(a){if(200==a.data.code){var n=e.$router.resolve({path:"/DetailData?id="+t});window.open(n.href)}else e.$alert("您尚未购买该数据！","提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.error(t)})}else this.$confirm("您还未登录，是否进入登录界面?","登录提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({path:"/Login?login=1"})}).catch(function(){})},getCoverImg:function(t){return"../../static/coverImg/"+t},getCategoryName:function(t){return this.SubCategoryObj.filter(function(e){return e.id==t})[0].name},getCategory:function(){var t=this;Object(c.a)().then(function(e){t.DatabaseObj=e.filter(function(t){return-1===t.pid}),t.SubCategoryObj=e.filter(function(t){return-1!=t.pid}),t.CategoryAll=e})}},s()(n,"getCategoryName",function(t){return this.CategoryAll.filter(function(e){return e.id===t})[0].name}),s()(n,"showInitDate",function(t,e){return Object(l.a)(t,e)}),s()(n,"sendSearchText",function(){this.$router.push({path:"/SearchResult",query:{q:this.searchText,Database:this.selectedDatabase.id}})}),s()(n,"deleteFromCollection",function(t){var e=this,a=localStorage.getItem("userInfo");a?this.$confirm("是否在您的收藏中删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n={userId:JSON.parse(a).id,contentId:t};e.$http.post("/collect/deleteCollectionInfo",n).then(function(t){200==t.data.code?e.$alert("删除成功！","提示",{confirmButtonText:"确定",callback:function(t){window.location.reload()}}):e.$alert("删除失败！","提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.error(t)})}).catch(function(){}):this.$confirm("您还未登录，是否进入登录界面?","登录提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({path:"/Login?login=1"})}).catch(function(){})}),s()(n,"splitKeyWord",function(t){return t.split(";")}),s()(n,"searchByTag",function(t){var e=this;this.isShowCategory=!1;var a={tagName:t};this.showSearchResults=!0,this.searchTextShow="",this.$http.post("/content/searchByTag",a).then(function(t){e.searchResults=t.data.data,e.getTotalPage()}).catch(function(t){console.error(t)})}),n),components:{"boji-navbar":o.a,"boji-webinfo":r.a}}),h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-container"},[a("boji-navbar"),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"titleBox"},[t._v(t._s(this.userInfo.nickname)+" 的收藏列表")]),t._v(" "),a("div",{staticClass:"collectBox"},[t._m(1),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"currentResultBox"},[t._l(t.currentPageData,function(e,n){return a("div",{key:e.id,staticClass:"dataShowBox"},[a("div",{staticClass:"resultPreImg",on:{click:function(a){return t.gotoDetail(e.id)}}},[a("el-image",{staticClass:"Img",staticStyle:{width:"85%",height:"85%","object-fit":"contain"},attrs:{src:t.getCoverImg(e.introimage),fit:"contain"}})],1),t._v(" "),a("div",{staticClass:"resultAttr",on:{click:function(a){return t.gotoDetail(e.id)}}},[t._v(t._s(e.dataid))]),t._v(" "),a("div",{staticClass:"resultAttr",on:{click:function(a){return t.gotoDetail(e.id)}}},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"resultAttr",on:{click:function(a){return t.gotoDetail(e.id)}}},[t._v(t._s(t.getCategoryName(e.typeId)))]),t._v(" "),a("div",{staticClass:"resultAttr"},t._l(t.splitKeyWord(e.remark1),function(e,n){return a("span",[t._v(t._s(e)+";")])}),0),t._v(" "),a("div",{staticClass:"resultAttr",staticStyle:{width:"11%"},on:{click:function(a){return t.gotoDetail(e.id)}}},[t._v(t._s(e.yeartime))]),t._v(" "),a("div",{staticClass:"resultAttr",staticStyle:{"flex-direction":"row",width:"16%"}},[a("el-button",{staticClass:"delete-button",staticStyle:{"margin-left":"50px","background-color":"transparent",color:"brown","font-size":"36px","border-color":"transparent"},attrs:{type:"primary"},on:{click:function(a){return t.deleteFromCollection(e.id)}}},[a("i",{staticClass:"el-icon-delete"})])],1)])}),t._v(" "),a("div",{staticClass:"pageGuideBox"},[t.searchResults.length>0?a("div",[a("span",[t._v("当前页: "+t._s(t.currentPage+1)+" / 总页数: "+t._s(t.totalPage))]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"small",disabled:0===t.currentPage},on:{click:t.prevPage}},[t._v("上一页")]),t._v(" "),a("el-button",{attrs:{type:"small",disabled:t.currentPage+1===t.totalPage},on:{click:t.nextPage}},[t._v("下一页")]),t._v(" "),a("el-input",{staticStyle:{width:"15%"},attrs:{type:"number",min:"1",max:t.totalPage,rows:20},on:{change:t.gotoPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1):t._e()])],2)])]),t._v(" "),a("boji-webinfo")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navBox"},[e("div",{staticClass:"logoBox"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"resultNav"},[a("div",{staticClass:"navpreImg"},[t._v("预览图")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("编号")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("标题")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("类别")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("关键词")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("时间年份")]),t._v(" "),a("div",{staticClass:"navId"},[t._v("操作")])])}]};var d=a("VU/8")(u,h,!1,function(t){a("IDhJ")},"data-v-00a7dbee",null);e.default=d.exports}});